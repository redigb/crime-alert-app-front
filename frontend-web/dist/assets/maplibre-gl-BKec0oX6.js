const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-BeZKpHVU.js","assets/index-DcV7uD1U.js","assets/index-B29Zc2HL.css"])))=>i.map(i=>d[i]);
import{K as O,r as a,_ as W,N as U}from"./index-DcV7uD1U.js";const ce=async()=>{try{return(await O.get("/reports")).data.data.map(r=>{var s;const[i,o]=r.fecha_hora_report.split(" ");return{id:r.id,titulo:r.titulo,descripcion:r.descripcion,ubicacion:r.direccion,categoria:r.titulo,fecha:i,hora:o,usuario:((s=r.user)==null?void 0:s.name)||"AnÃ³nimo",mediaType:r.image?"image":r.video?"video":null,mediaUrl:r.image||r.video||null,comentarios:r.comments_count||0,guardados:0,denuncias:0,likes:r.votes_conforme||0,vistas:0,estado:r.estado||null,latitude:r.latitude||0,longitude:r.longitude||0}})}catch(e){return console.error("Error al obtener reportes:",e),[]}},le=async e=>await O.post("/reports/create",e,{headers:{"Content-Type":"multipart/form-data"}}),Z=a.createContext(null);function j(e,n){const t=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(n)?n[0]:n?n.x:0,o=Array.isArray(n)?n[1]:n?n.y:0;return t===i&&r===o}function y(e,n){if(e===n)return!0;if(!e||!n)return!1;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(!y(e[t],n[t]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof e=="object"&&typeof n=="object"){const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const i of t)if(!n.hasOwnProperty(i)||!y(e[i],n[i]))return!1;return!0}return!1}function b(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function P(e,n){const t=n.viewState||n,r={};if("longitude"in t&&"latitude"in t&&(t.longitude!==e.center.lng||t.latitude!==e.center.lat)){const i=e.center.constructor;r.center=new i(t.longitude,t.latitude)}return"zoom"in t&&t.zoom!==e.zoom&&(r.zoom=t.zoom),"bearing"in t&&t.bearing!==e.bearing&&(r.bearing=t.bearing),"pitch"in t&&t.pitch!==e.pitch&&(r.pitch=t.pitch),t.padding&&e.padding&&!y(t.padding,e.padding)&&(r.padding=t.padding),r}const V=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function T(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const n={};for(const r of e.layers)n[r.id]=r;const t=e.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const o=n[r.ref];if(o){i=i||Object.assign({},r),delete i.ref;for(const s of V)s in o&&(i[s]=o[s])}return i||r});return{...e,layers:t}}const k={version:8,sources:{},layers:[]},z={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},A={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},I={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},q=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],B=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class M{constructor(n,t,r){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=i=>{const o=this.props[I[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onCameraEvent=i=>{if(this._internalUpdate)return;i.viewState=this._propsedCameraUpdate||b(this._map.transform);const o=this.props[A[i.type]];o&&o(i)},this._onCameraUpdate=i=>this._internalUpdate?i:(this._propsedCameraUpdate=b(i),P(i,this.props)),this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[z[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._MapClass=n,this.props=t,this._initialize(r)}get map(){return this._map}setProps(n){const t=this.props;this.props=n;const r=this._updateSettings(n,t),i=this._updateSize(n),o=this._updateViewState(n);this._updateStyle(n,t),this._updateStyleComponents(n),this._updateHandlers(n,t),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(n,t){const r=M.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(t.className=o.className;o.childNodes.length>0;)t.appendChild(o.childNodes[0]);i._container=t;const s=i._resizeObserver;s&&(s.disconnect(),s.observe(t)),r.setProps({...n,styleDiffing:!1}),i.resize();const{initialViewState:c}=n;return c&&(c.bounds?i.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):r._updateViewState(c)),i.isStyleLoaded()?i.fire("load"):i.once("style.load",()=>i.fire("load")),i._update(),r}_initialize(n){const{props:t}=this,{mapStyle:r=k}=t,i={...t,...t.initialViewState,container:n,style:T(r)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),t.gl){const c=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=c,t.gl)}const s=new this._MapClass(i);o.padding&&s.setPadding(o.padding),t.cursor&&(s.getCanvas().style.cursor=t.cursor),s.transformCameraUpdate=this._onCameraUpdate,s.on("style.load",()=>{var c;this._styleComponents={light:s.getLight(),sky:s.getSky(),projection:(c=s.getProjection)==null?void 0:c.call(s),terrain:s.getTerrain()},this._updateStyleComponents(this.props)}),s.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const c in z)s.on(c,this._onPointerEvent);for(const c in A)s.on(c,this._onCameraEvent);for(const c in I)s.on(c,this._onEvent);this._map=s}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");t==null||t.remove(),M.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const n=this._map;n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}_updateSize(n){const{viewState:t}=n;if(t){const r=this._map;if(t.width!==r.transform.width||t.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(n){const t=this._map,r=t.transform;if(!t.isMoving()){const o=P(r,n);if(Object.keys(o).length>0)return this._internalUpdate=!0,t.jumpTo(o),this._internalUpdate=!1,!0}return!1}_updateSettings(n,t){const r=this._map;let i=!1;for(const o of q)if(o in n&&!y(n[o],t[o])){i=!0;const s=r[`set${o[0].toUpperCase()}${o.slice(1)}`];s==null||s.call(r,n[o])}return i}_updateStyle(n,t){if(n.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=n.cursor||""),n.mapStyle!==t.mapStyle){const{mapStyle:r=k,styleDiffing:i=!0}=n,o={diff:i};"localIdeographFontFamily"in n&&(o.localIdeographFontFamily=n.localIdeographFontFamily),this._map.setStyle(T(r),o)}}_updateStyleComponents({light:n,projection:t,sky:r,terrain:i}){var c,l;const o=this._map,s=this._styleComponents;o.style._loaded&&(n&&!y(n,s.light)&&(s.light=n,o.setLight(n)),t&&!y(t,s.projection)&&t!==((c=s.projection)==null?void 0:c.type)&&(s.projection=typeof t=="string"?{type:t}:t,(l=o.setProjection)==null||l.call(o,s.projection)),r&&!y(r,s.sky)&&(s.sky=r,o.setSky(r)),i!==void 0&&!y(i,s.terrain)&&(!i||o.getSource(i.source))&&(s.terrain=i,o.setTerrain(i)))}_updateHandlers(n,t){const r=this._map;for(const i of B){const o=n[i]??!0,s=t[i]??!0;y(o,s)||(o?r[i].enable(o):r[i].disable())}}_queryRenderedFeatures(n){const t=this._map,{interactiveLayerIds:r=[]}=this.props;try{return t.queryRenderedFeatures(n,{layers:r.filter(t.getLayer.bind(t))})}catch{return[]}}_updateHover(n){var i;const{props:t}=this;if(t.interactiveLayerIds&&(t.onMouseMove||t.onMouseEnter||t.onMouseLeave)){const o=n.type,s=((i=this._hoveredFeatures)==null?void 0:i.length)>0,c=this._queryRenderedFeatures(n.point),l=c.length>0;!l&&s&&(n.type="mouseleave",this._onPointerEvent(n)),this._hoveredFeatures=c,l&&!s&&(n.type="mouseenter",this._onPointerEvent(n)),n.type=o}else this._hoveredFeatures=null}}M.savedMaps=[];const G=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function K(e){if(!e)return null;const n=e.map,t={getMap:()=>n};for(const r of $(n))!(r in t)&&!G.includes(r)&&(t[r]=n[r].bind(n));return t}function $(e){const n=new Set;let t=e;for(;t;){for(const r of Object.getOwnPropertyNames(t))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&n.add(r);t=Object.getPrototypeOf(t)}return Array.from(n)}const J=typeof document<"u"?a.useLayoutEffect:a.useEffect;function Y(e,n){const{RTLTextPlugin:t,maxParallelImageRequests:r,workerCount:i,workerUrl:o}=n;if(t&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:s,lazy:c=!0}=typeof t=="string"?{pluginUrl:t}:t;e.setRTLTextPlugin(s,l=>{l&&console.error(l)},c)}r!==void 0&&e.setMaxParallelImageRequests(r),i!==void 0&&e.setWorkerCount(i),o!==void 0&&e.setWorkerUrl(o)}const w=a.createContext(null);function Q(e,n){const t=a.useContext(Z),[r,i]=a.useState(null),o=a.useRef(),{current:s}=a.useRef({mapLib:null,map:null});a.useEffect(()=>{const u=e.mapLib;let m=!0,d;return Promise.resolve(u||W(()=>import("./maplibre-gl-BeZKpHVU.js").then(f=>f.m),__vite__mapDeps([0,1,2]))).then(f=>{if(!m)return;if(!f)throw new Error("Invalid mapLib");const p="Map"in f?f:f.default;if(!p.Map)throw new Error("Invalid mapLib");Y(p,e),e.reuseMaps&&(d=M.reuse(e,o.current)),d||(d=new M(p.Map,e,o.current)),s.map=K(d),s.mapLib=p,i(d),t==null||t.onMapMount(s.map,e.id)}).catch(f=>{const{onError:p}=e;p?p({type:"error",target:null,originalEvent:null,error:f}):console.error(f)}),()=>{m=!1,d&&(t==null||t.onMapUnmount(e.id),e.reuseMaps?d.recycle():d.destroy())}},[]),J(()=>{r&&r.setProps(e)}),a.useImperativeHandle(n,()=>s.map,[r]);const c=a.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),l={height:"100%"};return a.createElement("div",{id:e.id,ref:o,style:c},r&&a.createElement(w.Provider,{value:s},a.createElement("div",{"mapboxgl-children":"",style:l},e.children)))}const ue=a.forwardRef(Q),X=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function _(e,n){if(!e||!n)return;const t=e.style;for(const r in n){const i=n[r];Number.isFinite(i)&&!X.test(r)?t[r]=`${i}px`:t[r]=i}}function F(e,n){if(e===n)return null;const t=N(e),r=N(n),i=[];for(const o of r)t.has(o)||i.push(o);for(const o of t)r.has(o)||i.push(o);return i.length===0?null:i}function N(e){return new Set(e?e.trim().split(/\s+/):[])}const de=a.memo(a.forwardRef((e,n)=>{const{map:t,mapLib:r}=a.useContext(w),i=a.useRef({props:e}),o=a.useMemo(()=>{let S=!1;a.Children.forEach(e.children,v=>{v&&(S=!0)});const H={...e,element:S?document.createElement("div"):void 0},E=new r.Marker(H);return E.setLngLat([e.longitude,e.latitude]),E.getElement().addEventListener("click",v=>{var h,g;(g=(h=i.current.props).onClick)==null||g.call(h,{type:"click",target:E,originalEvent:v})}),E.on("dragstart",v=>{var g,C;const h=v;h.lngLat=o.getLngLat(),(C=(g=i.current.props).onDragStart)==null||C.call(g,h)}),E.on("drag",v=>{var g,C;const h=v;h.lngLat=o.getLngLat(),(C=(g=i.current.props).onDrag)==null||C.call(g,h)}),E.on("dragend",v=>{var g,C;const h=v;h.lngLat=o.getLngLat(),(C=(g=i.current.props).onDragEnd)==null||C.call(g,h)}),E},[]);a.useEffect(()=>(o.addTo(t.getMap()),()=>{o.remove()}),[]);const{longitude:s,latitude:c,offset:l,style:u,draggable:m=!1,popup:d=null,rotation:f=0,rotationAlignment:p="auto",pitchAlignment:x="auto"}=e;a.useEffect(()=>{_(o.getElement(),u)},[u]),a.useImperativeHandle(n,()=>o,[]);const D=i.current.props;(o.getLngLat().lng!==s||o.getLngLat().lat!==c)&&o.setLngLat([s,c]),l&&!j(o.getOffset(),l)&&o.setOffset(l),o.isDraggable()!==m&&o.setDraggable(m),o.getRotation()!==f&&o.setRotation(f),o.getRotationAlignment()!==p&&o.setRotationAlignment(p),o.getPitchAlignment()!==x&&o.setPitchAlignment(x),o.getPopup()!==d&&o.setPopup(d);const R=F(D.className,e.className);if(R)for(const S of R)o.toggleClassName(S);return i.current.props=e,U.createPortal(e.children,o.getElement())}));a.memo(a.forwardRef((e,n)=>{const{map:t,mapLib:r}=a.useContext(w),i=a.useMemo(()=>document.createElement("div"),[]),o=a.useRef({props:e}),s=a.useMemo(()=>{const c={...e},l=new r.Popup(c);return l.setLngLat([e.longitude,e.latitude]),l.once("open",u=>{var m,d;(d=(m=o.current.props).onOpen)==null||d.call(m,u)}),l},[]);if(a.useEffect(()=>{const c=l=>{var u,m;(m=(u=o.current.props).onClose)==null||m.call(u,l)};return s.on("close",c),s.setDOMContent(i).addTo(t.getMap()),()=>{s.off("close",c),s.isOpen()&&s.remove()}},[]),a.useEffect(()=>{_(s.getElement(),e.style)},[e.style]),a.useImperativeHandle(n,()=>s,[]),s.isOpen()){const c=o.current.props;(s.getLngLat().lng!==e.longitude||s.getLngLat().lat!==e.latitude)&&s.setLngLat([e.longitude,e.latitude]),e.offset&&!y(c.offset,e.offset)&&s.setOffset(e.offset),(c.anchor!==e.anchor||c.maxWidth!==e.maxWidth)&&(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth));const l=F(c.className,e.className);if(l)for(const u of l)s.toggleClassName(u);o.current.props=e}return U.createPortal(e.children,i)}));function L(e,n,t,r){const i=a.useContext(w),o=a.useMemo(()=>e(i),[]);return a.useEffect(()=>{const s=n,c=null,l=typeof n=="function"?n:null,{map:u}=i;return u.hasControl(o)||(u.addControl(o,s==null?void 0:s.position),c&&c(i)),()=>{l&&l(i),u.hasControl(o)&&u.removeControl(o)}},[]),o}function ee(e){const n=L(({mapLib:t})=>new t.AttributionControl(e),{position:e.position});return a.useEffect(()=>{_(n._container,e.style)},[e.style]),null}a.memo(ee);function te(e){const n=L(({mapLib:t})=>new t.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return a.useEffect(()=>{_(n._controlContainer,e.style)},[e.style]),null}a.memo(te);function ne(e,n){const t=a.useRef({props:e}),r=L(({mapLib:i})=>{const o=new i.GeolocateControl(e),s=o._setupUI;return o._setupUI=()=>{o._container.hasChildNodes()||s()},o.on("geolocate",c=>{var l,u;(u=(l=t.current.props).onGeolocate)==null||u.call(l,c)}),o.on("error",c=>{var l,u;(u=(l=t.current.props).onError)==null||u.call(l,c)}),o.on("outofmaxbounds",c=>{var l,u;(u=(l=t.current.props).onOutOfMaxBounds)==null||u.call(l,c)}),o.on("trackuserlocationstart",c=>{var l,u;(u=(l=t.current.props).onTrackUserLocationStart)==null||u.call(l,c)}),o.on("trackuserlocationend",c=>{var l,u;(u=(l=t.current.props).onTrackUserLocationEnd)==null||u.call(l,c)}),o},{position:e.position});return t.current.props=e,a.useImperativeHandle(n,()=>r,[]),a.useEffect(()=>{_(r._container,e.style)},[e.style]),null}const fe=a.memo(a.forwardRef(ne));function oe(e){const n=L(({mapLib:t})=>new t.NavigationControl(e),{position:e.position});return a.useEffect(()=>{_(n._container,e.style)},[e.style]),null}a.memo(oe);function ie(e){const n=L(({mapLib:o})=>new o.ScaleControl(e),{position:e.position}),t=a.useRef(e),r=t.current;t.current=e;const{style:i}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(n.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&n.setUnit(e.unit),a.useEffect(()=>{_(n._container,i)},[i]),null}a.memo(ie);function re(e){const n=L(({mapLib:t})=>new t.TerrainControl(e),{position:e.position});return a.useEffect(()=>{_(n._container,e.style)},[e.style]),null}a.memo(re);function se(e){const n=L(({mapLib:t})=>new t.LogoControl(e),{position:e.position});return a.useEffect(()=>{_(n._container,e.style)},[e.style]),null}a.memo(se);export{fe as G,ue as M,de as a,le as c,ce as l};
